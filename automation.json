{
  "devicesEndpoint": "/api/extensions/roku-integration/devices",
  "triggers": [
    {
      "key": "powered_on",
      "label": "Roku powered on",
      "description": "When a Roku device turns on (from standby or off)",
      "fields": [
        {"key": "device_id", "type": "device", "label": "Roku Device"}
      ],
      "output": ["device_id", "device_name", "entity_id"]
    },
    {
      "key": "powered_off",
      "label": "Roku powered off",
      "description": "When a Roku device turns off or goes to standby",
      "fields": [
        {"key": "device_id", "type": "device", "label": "Roku Device"}
      ],
      "output": ["device_id", "device_name", "entity_id"]
    },
    {
      "key": "started_playing",
      "label": "Roku started playing",
      "description": "When a Roku device starts playing content (app launched)",
      "fields": [
        {"key": "device_id", "type": "device", "label": "Roku Device"}
      ],
      "output": ["device_id", "device_name", "entity_id", "active_app", "active_app_id"]
    },
    {
      "key": "stopped_playing",
      "label": "Roku stopped playing",
      "description": "When a Roku device stops playing (returned to home or idle)",
      "fields": [
        {"key": "device_id", "type": "device", "label": "Roku Device"}
      ],
      "output": ["device_id", "device_name", "entity_id"]
    },
    {
      "key": "screensaver_started",
      "label": "Roku screensaver started",
      "description": "When the Roku screensaver activates",
      "fields": [
        {"key": "device_id", "type": "device", "label": "Roku Device"}
      ],
      "output": ["device_id", "device_name", "entity_id", "screensaver_name"]
    },
    {
      "key": "device_online",
      "label": "Roku came online",
      "description": "When a Roku device reconnects after being offline",
      "fields": [
        {"key": "device_id", "type": "device", "label": "Roku Device"}
      ],
      "output": ["device_id", "device_name", "ip_address"]
    },
    {
      "key": "device_offline",
      "label": "Roku went offline",
      "description": "When a Roku device becomes unreachable",
      "fields": [
        {"key": "device_id", "type": "device", "label": "Roku Device"}
      ],
      "output": ["device_id", "device_name", "reason"]
    }
  ],
  "actions": [
    {
      "key": "power_on",
      "label": "Power on Roku",
      "description": "Wake up a Roku device from standby",
      "endpoint": "POST /api/extensions/roku-integration/devices/{{device_id}}/power/on",
      "fields": [
        {"key": "device_id", "type": "device", "label": "Roku Device", "required": true}
      ]
    },
    {
      "key": "power_off",
      "label": "Power off Roku",
      "description": "Put a Roku device into standby",
      "endpoint": "POST /api/extensions/roku-integration/devices/{{device_id}}/power/off",
      "fields": [
        {"key": "device_id", "type": "device", "label": "Roku Device", "required": true}
      ]
    },
    {
      "key": "launch_app",
      "label": "Launch app on Roku",
      "description": "Launch an app on a Roku device",
      "endpoint": "POST /api/extensions/roku-integration/devices/{{device_id}}/launch/{{app_id}}",
      "fields": [
        {"key": "device_id", "type": "device", "label": "Roku Device", "required": true},
        {"key": "app_id", "type": "select", "label": "App", "required": true, "source": "/api/extensions/roku-integration/devices/{{device_id}}/apps"}
      ]
    },
    {
      "key": "send_keypress",
      "label": "Send Roku remote key",
      "description": "Send a remote control key press",
      "endpoint": "POST /api/extensions/roku-integration/devices/{{device_id}}/keypress/{{key}}",
      "fields": [
        {"key": "device_id", "type": "device", "label": "Roku Device", "required": true},
        {"key": "key", "type": "select", "label": "Key", "required": true, "options": [
          {"value": "Home", "label": "Home"},
          {"value": "Back", "label": "Back"},
          {"value": "Select", "label": "OK/Select"},
          {"value": "Up", "label": "Up"},
          {"value": "Down", "label": "Down"},
          {"value": "Left", "label": "Left"},
          {"value": "Right", "label": "Right"},
          {"value": "Play", "label": "Play"},
          {"value": "Pause", "label": "Pause"},
          {"value": "Rev", "label": "Rewind"},
          {"value": "Fwd", "label": "Fast Forward"},
          {"value": "VolumeUp", "label": "Volume Up"},
          {"value": "VolumeDown", "label": "Volume Down"},
          {"value": "VolumeMute", "label": "Mute"}
        ]}
      ]
    }
  ]
}
